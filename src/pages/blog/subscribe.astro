---
import BlogLayout from '../../layouts/BlogLayout.astro';
import Link from '../../components/Link';

import { author, blogSubscribeAction, blogSubscribeNameField, blogTitle } from '../../config/site';

const title = "Subscribe | " + blogTitle + " by " + author;
const description = "Get notified when I publish new articles on compilers, systems engineering, and developer tools.";
const keywords = "defined behavior, software engineering, compiler design, embedded systems, developer tooling, systems thinking, structured insight, newsletter signup, subscribe";
---
<BlogLayout
  noindex={true}
  title={title}
  description={description}
  keywords={keywords}
  showBanner={false}
  showSourceNote={false}
>
  <section class="card text-center">
    <div class="text-4xl mb-4">ðŸ“¬</div>
    <h2 class="text-center">Get new posts by email</h2>
    <p class="text-center">
      Subscribe to receive a brief note whenever I publish something new. No noise, just structured insight.
    </p>

    <form
      method="POST"
      action={blogSubscribeAction ?? "#"}
      class="flex flex-col sm:flex-row items-center gap-4 justify-center mt-4"
    >
      {blogSubscribeNameField && (
        <input
          type="text"
          name={blogSubscribeNameField}
          placeholder="What should I call you?"
          class="sm:w-auto"
        />
      )}
      <input
        type="email"
        name="email"
        required
        placeholder="Your email (you@example.com)"
        class="sm:w-auto"
      />
      <button
        type="submit"
        title={blogSubscribeAction ? "Subscribe to the mailing list" : "Subscription is disabled at the moment"}
      >
        Subscribe
      </button>
    </form>

    <p class="muted-note">
      Your email is used only for blog updates. You can unsubscribe anytime using the link included in every email.
    </p>

    <details>
      <summary class="muted-note">Prefer RSS?</summary>
      <p class="text-sm text-center"><Link href="/blog/rss.xml">Subscribe to the RSS feed</Link> to follow blog updates in your reader of choice.</p>
    </details>
  </section>
</BlogLayout>
